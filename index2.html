
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>덕영고 근처 판매점 찾기</title>
<link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="https://www.jqueryscript.net/demo/Google-Maps-Store-Locator-Plugin-For-jQuery/assets/css/storelocator.css" />
  </head>

  <body>

    <div class="bh-sl-container">
      <div id="page-header">
        <h1 class="bh-sl-title">Google Maps Store Locator Plugin Example</h1>
      </div>

      <div class="bh-sl-form-container">
        <form id="bh-sl-user-location" method="post" action="#">
            <div class="form-input">
              <label for="bh-sl-address">Enter Address or Zip Code:</label>
              <input type="text" id="bh-sl-address" name="bh-sl-address" />
            </div>

            <button id="bh-sl-submit" type="submit">Submit</button>
        </form>
      </div>

      <div id="map-canvas" style="width: 100%; height: 500px;"></div>

      <div id="bh-sl-map-container" class="bh-sl-map-container">
        <div id="bh-sl-map" class="bh-sl-map"></div>
        <div class="bh-sl-loc-list">
          <ul class="list"></ul>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="assets/js/libs/handlebars.min.js"></script>
    <!--script src="https://maps.google.com/maps/api/js?key=AIzaSyAEFLuCxU99kLoW2NB7_iQesxPuYaNSwiM"></script-->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB6fX3x3yOcFZAS9c5Hvqo4knw4YUNT1jo&callback=initMap"></script>
    <script src="https://www.jqueryscript.net/demo/Google-Maps-Store-Locator-Plugin-For-jQuery/assets/js/plugins/storeLocator/jquery.storelocator.js"></script>
    
		<script>
			$(function() {
				$('#bh-sl-map-container').storeLocator();
			});

      function initMap() {
        if (navigator.geolocation) { 
          // 정확한 위치 사용 // 캐시 사용 안함 // timeout 3초 (3000ms) 
          var positionOptions = { 
            enableHighAccuracy : true, 
            maximumAge : 0, 
            timeout : 3000 
          }; 
          navigator.geolocation.getCurrentPosition(onGeolocationSuccess, onGeolocationFail, positionOptions); 
        }
        function onGeolocationSuccess(position) {
          var lati = position.coords.latitude,
            longi = position.coords.longitude;

          if (document.getElementById("map-canvas")) {
            fMapView(lati, longi);
          }
        }
        function onGeolocationFail(error) {
          console.log("Error Code: " + error.code + ", Error Description: " + error.message); 
        }
      }
      function fMapView(lat, lon) {
        if (!lat || !lon) return !1;

        var mapLocation = new google.maps.LatLng(lat, lon); // 지도에서 가운데로 위치할 위도와 경도
        var markLocation = new google.maps.LatLng(lat, lon); // 마커가 위치할 위도와 경도
        
        var mapOptions = {
          center: mapLocation, // 지도에서 가운데로 위치할 위도와 경도(변수)
          zoom: 16, // 지도 zoom단계
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"), // id: map-canvas, body에 있는 div태그의 id와 같아야 함
          mapOptions);
        
        var size_x = 60; // 마커로 사용할 이미지의 가로 크기
        var size_y = 60; // 마커로 사용할 이미지의 세로 크기
        
        var marker;
        marker = new google.maps.Marker({
            position: markLocation, // 마커가 위치할 위도와 경도(변수)
            map: map,
            title: '' // 마커에 마우스 포인트를 갖다댔을 때 뜨는 타이틀
        });

        var circle = new google.maps.Circle({
          strokColor: "#FF0000",
          strokeOpacity: 0.8,
          fillColor: "#FF0000",
          fillOpacity: 0.35,
          map: map,
          center: mapLocation
        });
      }
		</script>


  </body>
</html>
